# Ideas for fake malware application

**Ý tưởng chương trình:**

- **Chương trình gốc**: Một ứng dụng Windows đơn giản có giao diện đồ họa (GUI), ví dụ như một ứng dụng notepad đơn giản, máy tính cá nhân, hoặc một trò chơi nhỏ.

- **Chức năng bổ sung**: Khi người dùng chạy chương trình, ngoài việc thực hiện các chức năng bình thường, chương trình sẽ thực hiện thêm các hành động sau:

  1. **Thêm vào khởi động cùng Windows**: Chương trình tự động thêm một khóa vào registry để khởi động cùng hệ thống.

  2. **Ghi thông tin vào registry**: Chương trình thêm thông tin ứng dụng vào registry tại một vị trí nhất định.

  3. **Tạo file trong thư mục AppData**: Chương trình tải một file từ Internet hoặc tạo một file mới trong thư mục AppData của người dùng.

**Kịch bản chi tiết:**

1. **Chuẩn bị chương trình gốc**:

   - Tạo một ứng dụng Windows Forms bằng ngôn ngữ C#, sử dụng Visual Studio.
   - Thiết kế giao diện đơn giản, ví dụ như một ứng dụng notepad với khả năng mở, chỉnh sửa và lưu file văn bản.

2. **Thêm chức năng "malware" vào chương trình**:

   - **Thêm vào khởi động cùng Windows**:
     - Sử dụng namespace `Microsoft.Win32` để truy cập registry.
     - Thêm một khóa mới vào `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run` với tên ứng dụng và đường dẫn tới file exe.
     - Mã mẫu:

       ```csharp
       using Microsoft.Win32;

       // Thêm vào khởi động cùng Windows
       RegistryKey reg = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
       reg.SetValue("TenUngDung", Application.ExecutablePath.ToString());
       ```

   - **Ghi thông tin vào registry**:
     - Ghi một số thông tin tùy ý vào một khóa trong registry, ví dụ `HKEY_CURRENT_USER\Software\TenUngDung`.
     - Mã mẫu:

       ```csharp
       // Ghi thông tin vào registry
       RegistryKey key = Registry.CurrentUser.CreateSubKey(@"Software\TenUngDung");
       key.SetValue("ThongTin", "Day la du lieu mau");
       key.Close();
       ```

   - **Tạo file trong thư mục AppData**:
     - Tải một file từ Internet hoặc tạo một file mới trong thư mục `%AppData%`.
     - Mã mẫu tải file:

       ```csharp
       using System.Net;

       // Tải file từ Internet
       WebClient webClient = new WebClient();
       string url = "https://example.com/file.txt"; // Thay bằng URL của bạn
       string dest = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\file.txt";
       webClient.DownloadFile(url, dest);
       ```

     - Mã mẫu tạo file mới:

       ```csharp
       using System.IO;

       // Tạo file mới trong AppData
       string dest = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\file.txt";
       File.WriteAllText(dest, "Noi dung mau");
       ```

3. **Đảm bảo chương trình hoạt động bình thường**:

   - Kiểm tra và chạy thử chương trình để đảm bảo rằng các chức năng gốc không bị ảnh hưởng.
   - Kiểm tra các chức năng bổ sung để đảm bảo chúng hoạt động như mong muốn.

4. **Hướng dẫn cho buổi tập huấn**:

   - **Bước 1**: Yêu cầu người tham dự chạy chương trình và sử dụng như bình thường.
   - **Bước 2**: Sau khi sử dụng, hướng dẫn họ kiểm tra các thay đổi trong hệ thống:
     - Kiểm tra khóa registry để thấy rằng chương trình đã thêm vào mục khởi động cùng Windows.
     - Kiểm tra registry để thấy thông tin ứng dụng được ghi vào.
     - Kiểm tra thư mục AppData để thấy file mới được tạo hoặc tải về.
   - **Bước 3**: Thảo luận về các hành vi này và cách chúng tương tự với hành vi của malware thực sự.
   - **Bước 4**: Hướng dẫn cách phát hiện và loại bỏ các thay đổi này, ví dụ như sử dụng các công cụ bảo mật, xóa khóa registry, xóa file không mong muốn.

5. **Lưu ý về an toàn**:

   - Đảm bảo rằng chương trình không gây hại cho hệ thống và chỉ thực hiện các hành động trong phạm vi kiểm soát.
   - Thông báo rõ ràng cho người tham dự về mục đích của chương trình và các hành động mà nó sẽ thực hiện.
   - Cung cấp hướng dẫn chi tiết về cách hoàn nguyên các thay đổi sau buổi tập huấn.

**Cách thực hiện biến chương trình mẫu thành chương trình fake malware**:

- **Bước 1**: Lấy mã nguồn của chương trình mẫu (nếu bạn sử dụng một chương trình có sẵn, cần có mã nguồn để chỉnh sửa).
- **Bước 2**: Mở dự án trong môi trường phát triển (ví dụ Visual Studio).
- **Bước 3**: Thêm các đoạn mã đã nêu ở trên vào chương trình, thường là trong sự kiện khởi động (Form Load).
- **Bước 4**: Biên dịch lại chương trình và kiểm tra kỹ lưỡng.

**Lời khuyên**:

- Nếu bạn không có mã nguồn của chương trình mẫu, bạn có thể tạo một chương trình mới với giao diện và chức năng tương tự.
- Tránh việc sửa đổi trực tiếp file exe đã biên dịch sẵn, vì điều này phức tạp và có thể dẫn đến các vấn đề không mong muốn.
- Đảm bảo rằng tất cả các hành động của chương trình đều được kiểm soát và không ảnh hưởng tiêu cực đến hệ thống.
